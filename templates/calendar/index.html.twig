{% extends("base.html.twig") %}

{% block content%}
 <div class="row mr-1">
    <div class="col-lg-12 ">
        <div class="float-left">
            <h2>Plan lekcji</h2>
        </div>
        {% if 'ROLE_ADMIN' in app.user.roles %}
            <div class="float-right row mb-2">
                <!-- Wyszukiwarka użytkowników -->
                <form class="form-inline" action="">
                    <div class="form-row">
                        <div class="col-auto">
                            <select class='custom-select mr-sm-2' name="typeClassId" id="typeClassId" style='width:150px;'>
                                {% for activitie in activities %} 
                                    {# <option @if ( Request::get('typeClassId')  == $activitie->id) selected @endif value="{{$activitie->id}}"> Klasa: {{$activitie->name}}</option> #}
                                    <option value="{{activitie.id}}"> Klasa: {{activitie.name}}</option> 
                                {% endfor %}
                            </select>
                        </div>
                        <button class="btn btn-primary mr-3" type="sumbit">Wyszukaj</button>
                    </div>
                </form>
            </div>
        {% endif %}

    <table class="table shadow-lg p-3 mb-5 bg-white" style='border-collapse: separate;'>

        <thead class='thead-light'>
            <th width="125">Czas</th>
              {% for day in weekDays %}         
                <th>{{ day }}</th>
            {% endfor %}
        </thead >
        <tbody>
            {% for time,days in calendarData%}  
                <tr >
                    <td class="table-light">
                      <b> {{ time }}</b>  
                     
                    {% for value in days %}  
                         {% if value is iterable  %}                       
                        
                            <td rowspan="{{ value.rowspan}}" class="align-middle text-center text-white  "
                            style="border-radius: 20px; 40px; background-color:{{value.color}}; opacity:0.8;">
                                Przedmiot: {{ value['subject_name'] }}<br>
                                 {% if 'ROLE_STUDENT' in app.user.roles %}
                                    Nauczyciel: {{ value.teacher_name}} {{value.teacher_surname }}
                                {% elseif 'ROLE_TEACHER' in app.user.roles %}                                  
                                    Klasa: {{ value.class_name}}
                                {% elseif 'ROLE_ADMIN' in app.user.roles %}
                                    Nauczyciel: {{ value.teacher_name}} {{value.teacher_surname }}
                                    Klasa: {{ value.class_name}}<br>                                    
                                {% endif %}  
                            </td>
                        {% elseif (value is same as(1)) %}
                            <td >  </td>
                        {% endif %}
                   {% endfor %}
                </tr>
             {% endfor %}
        </tbody>
    </table> 

{% endblock %}
